const ytsRes = [
    {
      "imdbId": 13807,
      "url": "https:\/\/yts.lt\/movie\/heidi-2015",
      "imdb_code": "tt3700392",
      "title": "Heidi",
      "title_english": "Heidi",
      "title_long": "Heidi (2015)",
      "slug": "heidi-2015",
      "year": 2015,
      "rating": 7.4,
      "runtime": 111,
      "genres": [
        "Adventure",
        "Drama",
        "Family"
      ],
      "summary": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "description_full": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "synopsis": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "yt_trailer_code": "eQrZ26kPSpM",
      "language": "English",
      "mpa_rating": "",
      "background_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/background.jpg",
      "background_image_original": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/background.jpg",
      "small_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/small-cover.jpg",
      "medium_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/medium-cover.jpg",
      "large_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/large-cover.jpg",
      "state": "ok",
      "torrents": [
        {
          "url": "https:\/\/yts.lt\/torrent\/download\/29474827C97B4279A3EFCCB70179501D0BDD5BF0",
          "hash": "29474827C97B4279A3EFCCB70179501D0BDD5BF0",
          "quality": "720p",
          "type": "bluray",
          "seeds": 17,
          "peers": 104,
          "size": "995.47 MB",
          "size_bytes": 1043825951,
          "date_uploaded": "2019-10-03 07:43:13",
          "date_uploaded_unix": 1570081393
        },
        {
          "url": "https:\/\/yts.lt\/torrent\/download\/751E2180DD253C0C4B891DE76736B94EC616D8B1",
          "hash": "751E2180DD253C0C4B891DE76736B94EC616D8B1",
          "quality": "1080p",
          "type": "bluray",
          "seeds": 0,
          "peers": 0,
          "size": "1.75 GB",
          "size_bytes": 1879048192,
          "date_uploaded": "2019-10-03 09:19:40",
          "date_uploaded_unix": 1570087180
        }
      ],
      "date_uploaded": "2019-10-03 07:43:13",
      "date_uploaded_unix": 1570081393
    },
    {
      "imdbId": 13806,
      "url": "https:\/\/yts.lt\/movie\/mermaid-down-2019",
      "imdb_code": "tt3584496",
      "title": "Mermaid Down",
      "title_english": "Mermaid Down",
      "title_long": "Mermaid Down (2019)",
      "slug": "mermaid-down-2019",
      "year": 2019,
      "rating": 4.5,
      "runtime": 91,
      "genres": [
        "Horror"
      ],
      "summary": "A mermaid is ripped from the Pacific, her tail is chopped off and she's thrown into a mental home where no one believes she is a mermaid.",
      "description_full": "A mermaid is ripped from the Pacific, her tail is chopped off and she's thrown into a mental home where no one believes she is a mermaid.",
      "synopsis": "A mermaid is ripped from the Pacific, her tail is chopped off and she's thrown into a mental home where no one believes she is a mermaid.",
      "yt_trailer_code": "ns57sDS9FjU",
      "language": "English",
      "mpa_rating": "",
      "background_image": "https:\/\/yts.lt\/assets\/images\/movies\/mermaid_down_2019\/background.jpg",
      "background_image_original": "https:\/\/yts.lt\/assets\/images\/movies\/mermaid_down_2019\/background.jpg",
      "small_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/mermaid_down_2019\/small-cover.jpg",
      "medium_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/mermaid_down_2019\/medium-cover.jpg",
      "large_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/mermaid_down_2019\/large-cover.jpg",
      "state": "ok",
      "torrents": [
        {
          "url": "https:\/\/yts.lt\/torrent\/download\/A5354BACE5D183D853BED64BD23A489AC9DBB677",
          "hash": "A5354BACE5D183D853BED64BD23A489AC9DBB677",
          "quality": "720p",
          "type": "web",
          "seeds": 0,
          "peers": 0,
          "size": "842.71 MB",
          "size_bytes": 883645481,
          "date_uploaded": "2019-10-03 05:31:57",
          "date_uploaded_unix": 1570073517
        },
        {
          "url": "https:\/\/yts.lt\/torrent\/download\/3EDB9DF18A2CB93E50FB3C22A51FA122CB6B6A61",
          "hash": "3EDB9DF18A2CB93E50FB3C22A51FA122CB6B6A61",
          "quality": "1080p",
          "type": "web",
          "seeds": 0,
          "peers": 0,
          "size": "1.48 GB",
          "size_bytes": 1589137900,
          "date_uploaded": "2019-10-03 06:51:55",
          "date_uploaded_unix": 1570078315
        }
      ],
      "date_uploaded": "2019-10-03 05:31:57",
      "date_uploaded_unix": 1570073517
    }
  ];
const popcornRes = [
    {
      "imdbId": 13807,
      "url": "https:\/\/yts.lt\/movie\/heidi-2015",
      "imdb_code": "tt3700392",
      "title": "Heidi",
      "title_english": "Heidi",
      "title_long": "Heidi (2015)",
      "slug": "heidi-2015",
      "year": 2015,
      "rating": 7.4,
      "runtime": 111,
      "genres": [
        "Adventure",
        "Drama",
        "Family"
      ],
      "summary": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "description_full": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "synopsis": "A story of a young girl who lives in the Swiss Alps with her goat herding Grandfather.",
      "yt_trailer_code": "eQrZ26kPSpM",
      "language": "English",
      "mpa_rating": "",
      "background_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/background.jpg",
      "background_image_original": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/background.jpg",
      "small_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/small-cover.jpg",
      "medium_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/medium-cover.jpg",
      "large_cover_image": "https:\/\/yts.lt\/assets\/images\/movies\/heidi_2015\/large-cover.jpg",
      "state": "ok",
      "torrents": [
        {
          "url": "TEST11111",
          "hash": "*&*&*&*ˆ&ˆ&*&*",
        },
      ],
      "date_uploaded": "2019-10-03 07:43:13",
      "date_uploaded_unix": 1570081393
    }];

const completeRawResult = ytsRes.concat(popcornRes);
const filteredResults = [];
completeRawResult.map(movie => {
    for (i = 0; i < filteredResults.length; i++) {
        if (!movie.imdbId) return null;
        if (filteredResults[i].imdbId === movie.imdbId) {
            filteredResults[i].torrents = [
                ...movie.torrents,
                ...filteredResults[i].torrents,
            ]
            return null
        }
    }
    filteredResults.push(movie);
})

for (i = 0; i < completeRawResult.length; i++) {
    for (j = 0; j < completeRawResult.length; j++) {
        if (completeRawResult[i].imdbId === completeRawResult[j].imdbId) {
            if (completeRawResult[i].torrents.length > completeRawResult[j].torrents.length) {
                completeRawResult.splice(j, 1);
            } 
        }
    }
}

// for (i = 0; i < completeRawResult.length; i++) {
//     if (doubles[i].imdbId === movie.imdbId) {
//         if (doubles[i].torrents.length > movie.torrents.length) {
//             // doubles.remove(i);
//         }
//     }
// }

// var ids = new Set(ytsRes.map(d => d.imdbId));
// var movieList = [...ytsRes, ...popcornRes.filter(d => !ids.has(d.imdbId))];

for(var a = 0; a < movieList.length; a++) {
    if(movieList[a].poster === "N/A") {
        movieList.splice(a, 1);
        a--;
        break;
    }
}

console.log("complete RWA =", completeRawResult);